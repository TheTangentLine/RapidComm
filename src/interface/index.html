<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RapidComm - File Upload</title>
    <link rel="stylesheet" href="styles/upload.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  </head>
  <body>
    <!-- Floating particles container -->
    <div class="particles" id="particles" aria-hidden="true"></div>

    <!-- Main upload container -->
    <main class="upload-container" role="main">
      <header>
        <h1>Upload Your Files</h1>
      </header>

      <form
        class="upload-form"
        method="POST"
        enctype="multipart/form-data"
        novalidate
      >
        <!-- File input section -->
        <section class="file-input-wrapper" aria-label="File selection">
          <label for="file" class="file-input-label" id="fileLabel">
            <svg
              class="upload-icon"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
            >
              <path
                d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M17 8L12 3L7 8"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M12 3V15"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <div class="upload-text">
              <div>Drag & drop your files here</div>
              <div class="upload-subtext">
                or click to browse (multiple files supported)
              </div>
            </div>
          </label>

          <input
            type="file"
            id="file"
            name="file"
            multiple
            required
            aria-describedby="file-help"
            accept="*/*"
          />

          <!-- File information display -->
          <div class="file-info" id="fileInfo" aria-live="polite">
            <div class="files-selected" id="filesSelected"></div>
            <div class="files-list" id="filesList" role="list"></div>
          </div>
        </section>

        <!-- Progress section -->
        <section
          class="progress-container"
          id="progressContainer"
          aria-label="Upload progress"
        >
          <div
            class="progress-bar"
            id="progressBar"
            role="progressbar"
            aria-valuemin="0"
            aria-valuemax="100"
          ></div>
          <div class="progress-text" id="progressText" aria-live="polite"></div>
        </section>

        <!-- Submit button -->
        <button
          type="submit"
          class="submit-btn"
          id="submitBtn"
          disabled
          aria-describedby="submit-help"
        >
          Upload Files
        </button>
      </form>

      <!-- Status messages -->
      <div
        class="message"
        id="message"
        role="alert"
        aria-live="assertive"
      ></div>
    </main>

    <!-- Screen reader only help text -->
    <div id="file-help" class="sr-only">
      Select one or more files to upload. You can drag and drop files or click
      to browse.
    </div>
    <div id="submit-help" class="sr-only">
      Upload the selected files to the server. Button is disabled until files
      are selected.
    </div>

    <!-- Load application scripts -->
    <script type="module" src="js/app.js"></script>

    <!-- Fallback for browsers without module support -->
    <script nomodule>
      document.body.innerHTML = `
        <div style="
          display: flex;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          text-align: center;
          padding: 2rem;
          background: #0a0a0b;
          color: white;
          font-family: system-ui, sans-serif;
        ">
          <div>
            <h1 style="color: #ff6b6b; margin-bottom: 1rem;">Browser Not Supported</h1>
            <p>This application requires a modern browser that supports ES6 modules.</p>
            <p style="margin-top: 1rem; opacity: 0.7;">
              Please update your browser or use Chrome, Firefox, Safari, or Edge.
            </p>
          </div>
        </div>
      `;
    </script>

    <!-- Additional styles for accessibility -->
    <style>
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :root {
          --border: rgba(255, 255, 255, 0.3);
          --text-secondary: rgba(255, 255, 255, 0.9);
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .particles {
          display: none;
        }
      }

      /* Focus styles for better accessibility */
      .file-input-label:focus-within {
        outline: 2px solid #667eea;
        outline-offset: 2px;
      }

      .submit-btn:focus {
        outline: 2px solid #667eea;
        outline-offset: 2px;
      }

      /* Keyboard navigation improvements */
      .file-item:focus {
        background: rgba(102, 126, 234, 0.1);
        outline: 1px solid rgba(102, 126, 234, 0.5);
        outline-offset: 1px;
      }
    </style>
  </body>
</html>
